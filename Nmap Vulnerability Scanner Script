#!/bin/bash

# Usage: ./nmap_vuln_scan.sh <target> [output_file]
TARGET=$1
OUTPUT_FILE=$2

if [ -z "$TARGET" ]; then
    echo "Usage: $0 <target> [output_file]"
    exit 1
fi

echo "Starting Nmap vulnerability scan on $TARGET..."

# Run Nmap with vulnerability detection scripts
if [ -z "$OUTPUT_FILE" ]; then
    nmap -sV --script=vuln "$TARGET"
else
    nmap -sV --script=vuln "$TARGET" -oN "$OUTPUT_FILE"
    echo "Scan results saved to $OUTPUT_FILE"
fi

if [ $? -ne 0 ]; then
    echo "Nmap scan failed. Please check if Nmap is installed and the target is reachable."
    exit 1
fi

echo "Vulnerability scan completed."
